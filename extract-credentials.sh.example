#!/bin/bash
# This is a template file. The actual file with real values is:
# extract-credentials.sh (ignored in .gitignore)
# Copy this file to extract-credentials.sh and run it to extract credentials.

# Script to extract Google OAuth credentials from credentials.json
# Outputs values suitable for .env or .htaccess

set -e  # Exit on error

echo "üîê Extracting Google OAuth credentials from credentials.json"
echo "=" | head -c 60; echo ""

# Check if credentials.json exists
if [ ! -f credentials.json ]; then
    echo "‚ùå Error: credentials.json not found"
    echo "   Please download OAuth 2.0 credentials from Google Cloud Console"
    exit 1
fi

# Extract client ID and secret
CLIENT_ID=$(python3 -c "import json; print(json.load(open('credentials.json'))['installed']['client_id'])")
CLIENT_SECRET=$(python3 -c "import json; print(json.load(open('credentials.json'))['installed']['client_secret'])")

# Output in .env format
echo ""
echo "üìã Add these to your .env file:"
echo "=" | head -c 60; echo ""
echo "GOOGLE_CLIENT_ID=${CLIENT_ID}"
echo "GOOGLE_CLIENT_SECRET=${CLIENT_SECRET}"
echo "GOOGLE_REDIRECT_URI=https://www.specialisedsteering.com/oauth2callback"
echo ""
echo "üìã Or for .htaccess (SetEnv format):"
echo "=" | head -c 60; echo ""
echo "SetEnv GOOGLE_CLIENT_ID ${CLIENT_ID}"
echo "SetEnv GOOGLE_CLIENT_SECRET ${CLIENT_SECRET}"
echo "SetEnv GOOGLE_REDIRECT_URI https://www.specialisedsteering.com/oauth2callback"
echo ""

